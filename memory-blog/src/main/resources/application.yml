server:
  port: 8080

spring:
  application:
    name: memory-server

  # 数据库配置 (直接写死，确保连接成功)
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/memory?characterEncoding=utf-8&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=GMT%2B8
    username: root
    password: 10.26syd

  # 文件上传限制 (同步原作者配置)
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 100MB

# MyBatis-Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# JWT 配置
jwt:
  secret-key: ohh_memory_server_secret_key_123456789
  ttl: 259200000
  token-name: Authorization

# x-file-storage 配置 (适配 Spring Boot 3 + 你的 WebConfig)
# x-file-storage 配置
dromara:
  x-file-storage:
    default-platform: local-1
    thumbnail-suffix: ".min.jpg"
    # 使用新版的 local-plus 替代旧版的 local
    local-plus:
      - platform: local-1
        enable-storage: true
        enable-access: true
        path-patterns: /static/upload/**
        # 访问域名前缀（注意加上你全局配置的 /api 前缀）
        domain: http://localhost:8080/api/static/upload/
        # 本地存储的绝对路径
        base-path: C:/Develop/uploads/

# 你的 WebConfig 依赖的路径
file:
  dir: C:/Develop/uploads/

# Knife4j / OpenAPI 3 配置 (适配 v4.0+)
knife4j:
  enable: true
  openapi:
    title: "Memory 在线API文档 (ohh版)"
    description: "有些梦虽然遥不可及，但并不是不可能实现!"
    version: v4.0
    group:
      default:
        group-name: default
        api-rule: package
        # 【重要】这里必须改成你现在的包名，否则文档里没接口
        api-rule-resources:
          - ohh.net.web.controller

# 原作者的自定义限流逻辑 (RateLimitAspect 会读取这里)
blog:
  limit:
    tokens: 20      # 每周期允许 20 次
    duration: 60    # 周期为 60 秒
    blacklist:
      threshold: 10 # 触发黑名单的阈值
      duration: 60  # 黑名单持续时间(分钟)